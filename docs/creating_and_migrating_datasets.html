<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Creating and Migrating Datasets &#8212; QuartzBio  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dataset Templates" href="dataset_templates.html" />
    <link rel="prev" title="Vaults and Objects" href="vaults_and_objects.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="creating-and-migrating-datasets">
<h1>Creating and Migrating Datasets<a class="headerlink" href="#creating-and-migrating-datasets" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>A dataset on the EDP represents a collection of records indexed with a specific schema (i.e. a list of fields). Datasets make it easy to query and filter datasets of <strong>any size in real-time</strong>.</p>
<p>Datasets can be created with a predefined schema (using a <a class="reference external" href="https://quartzbio.github.io/quartzbio-python/dataset_templates.html#overview">Dataset template</a>) or without any fields. The platform will always detect new fields in imported records and assign data types. However, users are recommended to use templates so that the data types of fields can be set in advance. Records can be added to datasets in multiple ways such as transforming files into datasets, programmatically generating records, or copying records from other datasets using <a class="reference external" href="https://quartzbio.github.io/quartzbio-python/creating_and_migrating_datasets.html#migrating-datasets">dataset migrations</a>.</p>
<p>Datasets are designed to be a flexible and scalable solution for storing structured JSON-compatible data. The molecular data landscape is filled with a large variety of unique file formats, each with its own subtleties and quirks. On the EDP, almost any data source can be imported into a dataset as long as it can be transformed into JSON. The EDP supports many formats, making it easy to import data into a dataset. Once the data has been imported into a dataset, users can take advantage of the many features they offer: scalability, portability, version control, flexibility of schemas, querying and filtering of data as well as annotation and analysis using <a class="reference external" href="https://quartzbio.github.io/quartzbio-python/expressions.html#overview">Expressions</a>.</p>
</section>
<section id="creating-datasets">
<h2>Creating Datasets<a class="headerlink" href="#creating-datasets" title="Link to this heading">¶</a></h2>
<p>To start working with datasets on the EDP, users can create new, empty datasets “from scratch”. Datasets have both a schema (dataset fields) and contents (dataset records). On the EDP, users don’t need to know their schema in advance (fields are automatically detected from imported data). However, in many cases crafting a schema (i.e. setting dataset fields) can help avoid issues with data types and field names.</p>
<p>To create a dataset, users can supply a full path in the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">domain</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">vault</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example, for a new dataset within a folder in a shared vault:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myDomain</span><span class="p">:</span><span class="n">MyVault</span><span class="p">:</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="n">dataset</span>
</pre></div>
</div>
<p>Or for a new dataset within a folder in a user’s personal vault (represented by “~/”):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">folder</span><span class="o">/</span><span class="n">dataset</span>
</pre></div>
</div>
<p>In Python:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">quartzbio</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dataset</span>

<span class="c1"># Create a new, empty dataset in your personal vault (represented by &quot;~/&quot;)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">get_or_create_by_full_path</span><span class="p">(</span><span class="s1">&#39;~/my_dataset&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When creating the dataset, users can supply a number of optional parameters:</p>
<ul class="simple">
<li><p>description: A description (text) of the dataset.</p></li>
<li><p>fields: A list of field objects.</p></li>
<li><p>capacity: A performance optimization for datasets that will have tens or hundreds of millions of records. The default is “small” but can be set to “medium” or “large”. This cannot be changed once it has been set.</p></li>
<li><p>metadata: A dictionary of key/value pairs that can be associated with the dataset.</p></li>
<li><p>tags: A list of strings (tags) that can be associated with the dataset.</p></li>
</ul>
<p>Once the dataset is created it will be empty (containing no records) and consist of the default EDP _id field and any other fields that may have been added to the fields parameter. Fields beginning with an underscore such as _id and _commit are considered reserved and may be modified during an import. The _id field represents the unique ID for each record, which can be used to <strong>edit</strong> or <strong>delete</strong> individual records. The value of _id cannot be edited once a record is saved. The _commit field is always reset during the commit process and makes it possible to track and log all changes made to a Dataset.</p>
</section>
<section id="dataset-fields">
<h2>Dataset Fields<a class="headerlink" href="#dataset-fields" title="Link to this heading">¶</a></h2>
<p>By default, new fields are automatically detected by the import system when transforming a file into a dataset. Users can also provide a list of fields (i.e. a template) using the fields parameter and explicitly set names and titles, data types, ordering, descriptions, and entity types for each field.</p>
<p>Dataset fields have the following properties:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Property</strong></p></th>
<th class="head"><p><strong>Value</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name (<strong>required</strong>)</p></td>
<td><p>string</p></td>
<td><p>The “low-level” field name, is used in JSON-formatted records.</p></td>
</tr>
<tr class="row-odd"><td><p>data_type</p></td>
<td><p>string</p></td>
<td><p>A valid data type.</p></td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p>string</p></td>
<td><p>Free text that describes the contents of the field.</p></td>
</tr>
<tr class="row-odd"><td><p>entity_type</p></td>
<td><p>string</p></td>
<td><p>A valid EDP entity type.</p></td>
</tr>
<tr class="row-even"><td><p>expression</p></td>
<td><p>string</p></td>
<td><p>A valid EDP expression.</p></td>
</tr>
<tr class="row-odd"><td><p>is_hidden</p></td>
<td><p>boolean</p></td>
<td><p>Set to True if the field should be excluded by default from the UI. The default is False.</p></td>
</tr>
<tr class="row-even"><td><p>is_list</p></td>
<td><p>boolean</p></td>
<td><p>Set to True if multiple values are stored as a list. The default is False.</p></td>
</tr>
<tr class="row-odd"><td><p>ordering</p></td>
<td><p>integer</p></td>
<td><p>The order in which this column appears in the UI and in tabular exports.</p></td>
</tr>
<tr class="row-even"><td><p>title</p></td>
<td><p>string</p></td>
<td><p>The field’s display name is shown in the UI and in tabular exports. Default is set automatically from the name.</p></td>
</tr>
<tr class="row-odd"><td><p>is_transient</p></td>
<td><p>boolean</p></td>
<td><p>Set to True if the field is a temporary field used for the purposes of easier data &amp; expression manipulation during imports &amp; migrations. The default is False.</p></td>
</tr>
<tr class="row-even"><td><p>depends_on</p></td>
<td><p>list of strings</p></td>
<td><p>List of fields that must have expressions run first before this field’s expression is evaluated. In other words, what other fields that this field depends on? The default is an empty list.</p></td>
</tr>
<tr class="row-odd"><td><p>url_template</p></td>
<td><p>string</p></td>
<td><p>A URL template with one or more “{value}” sections that will be interpolated with the field value and displayed as a link in the dataset table</p></td>
</tr>
</tbody>
</table>
<p>Users should note that double underscores (“__”) should not be used in dataset field names.</p>
<p>The following example creates a new dataset using a template with two fields:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">quartzbio</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dataset</span><span class="p">,</span> <span class="n">DatasetField</span>

<span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_string_field&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Just a string&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data_type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="s2">&quot;is_list&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;is_hidden&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;ordering&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;gene_symbol&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;HUGO gene symbol&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data_type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entity_type&quot;</span><span class="p">:</span> <span class="s2">&quot;gene&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="n">dataset_full_path</span> <span class="o">=</span> <span class="s1">&#39;~/python_examples/my_fields_dataset&#39;</span>

<span class="c1">## Fields, capacity, and other optional parameters can be set during dataset creation</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">get_or_create_by_full_path</span><span class="p">(</span>
    <span class="n">dataset_full_path</span><span class="p">,</span>
    <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
    <span class="n">capacity</span><span class="o">=</span><span class="s1">&#39;small&#39;</span>
<span class="p">)</span>

<span class="c1">## If the dataset already exists, you can add additional fields:</span>
<span class="n">DatasetField</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_new_field&quot;</span><span class="p">,</span>
    <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">)</span>

<span class="c1">## Fields can also be edited</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="s2">&quot;my_string_field&quot;</span><span class="p">)</span>
<span class="n">field</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A new description&quot;</span>
<span class="n">field</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<section id="url-template">
<h3>URL Template<a class="headerlink" href="#url-template" title="Link to this heading">¶</a></h3>
<p>If users add a <code class="docutils literal notranslate"><span class="pre">url_template</span></code> value to the dataset field, the dataset table will show the value as a link in the EDP UI. This is useful for linking to other sources/websites. The dataset below has links for the gene and variant pages on EDP:</p>
<a class="reference external image-reference" href="https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/73063228026/original/KQ21JSo_ifuMQ4KCmFXzIZ4f9JLUaVWSLw.png?1689112995"><img alt="" src="https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/73063228026/original/KQ21JSo_ifuMQ4KCmFXzIZ4f9JLUaVWSLw.png?1689112995" />
</a>
<p><strong>URL Template</strong>: Adding a value to the <code class="docutils literal notranslate"><span class="pre">url_template</span></code> property of a field will link it to the field values in the EDP web interface.</p>
</section>
</section>
<section id="migrating-datasets">
<h2>Migrating Datasets<a class="headerlink" href="#migrating-datasets" title="Link to this heading">¶</a></h2>
<p>Users can perform dataset “migrations” to copy data between or within datasets as well as use Python-based EDP <a class="reference external" href="https://quartzbio.github.io/quartzbio-python/expressions.html#overview">Expressions</a> to transform data during migrations. As such, migrations allow users to modify datasets in-place, making it possible to add, edit, and remove fields. All dataset migrations have a source dataset and a target dataset (which can be the same when editing a single dataset).</p>
</section>
<section id="copying-datasets">
<h2>Copying Datasets<a class="headerlink" href="#copying-datasets" title="Link to this heading">¶</a></h2>
<p>Copying a dataset is the simplest dataset migration. In this case, a new dataset is created (the target) and all the records from a source dataset are copied to it. The source dataset remains unchanged. Copying datasets can be useful if users do not want to alter the source dataset or if they do not have write access to the source dataset.</p>
<p>If users do not want to copy the entire source dataset, they can provide filter parameters to copy a subset. This example copies all BRCA1 variants from ClinVar into a new dataset:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">quartzbio</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dataset</span>

<span class="c1">## Retrieve the source dataset</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">get_by_full_path</span><span class="p">(</span><span class="s1">&#39;quartzbio:Public:/ClinVar/5.2.0-20210110/Variants-GRCH37&#39;</span><span class="p">)</span>
<span class="c1">## Create your new target dataset</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">get_or_create_by_full_path</span><span class="p">(</span><span class="s1">&#39;~/python_examples/clinvar&#39;</span><span class="p">)</span>

<span class="c1">## Copy all variants in BRCA1</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">gene</span><span class="o">=</span><span class="s1">&#39;BRCA1&#39;</span><span class="p">)</span>
<span class="n">query</span><span class="o">.</span><span class="n">migrate</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="modifying-fields">
<h2>Modifying Fields<a class="headerlink" href="#modifying-fields" title="Link to this heading">¶</a></h2>
<p>The title, description, url_template, ordering, and entity_type of a field can be modified at any time. Field names cannot be renamed and fields cannot be removed in-place, though they can be hidden by setting the <code class="docutils literal notranslate"><span class="pre">is_hidden</span></code> parameter to TRUE. To change the name of a field, users must perform a dataset migration to create a new field with the desired name in the cloned dataset. Similarly, to remove a field from a dataset, it must be cloned to a new dataset that does not have the field the user intends to delete. For more information about modifying datasets, users can refer to the <a class="reference external" href="https://quartzbio.github.io/quartzbio-python/transforming_datasets.html#modifying-fields">Modifying Datasets</a> documentation.</p>
<p>The following example renames the field of the dataset through a dataset migration:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">quartzbio</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sb</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">sb</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">get_or_create_by_full_path</span><span class="p">(</span><span class="s2">&quot;dataset_id&quot;</span><span class="p">)</span>

<span class="c1">## We want to transform the data by passing target_fields.</span>
<span class="c1">## Because there is no &quot;rename&quot; functionality, the workaround is to create new fields from with the values from the old fields. Set is_transient=TRUE for the old fields so that they are just temporarily used during data transform, and not included in the output.</span>
<span class="c1">## The new fields just take the value of the old fields.</span>
<span class="n">target_fields</span> <span class="o">=</span> <span class="p">[</span>
               <span class="p">{</span>
                      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;old_field_name&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;is_transient&quot;</span><span class="p">:</span> <span class="kc">True</span>
               <span class="p">},</span>
               <span class="p">{</span>
                      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;new_field_name&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;data_type&quot;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
                      <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;record.old_field_name&quot;</span>
               <span class="p">}</span>
 <span class="p">]</span>

<span class="c1">## Create migration</span>
<span class="n">migration</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">migrate</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span> <span class="n">target_fields</span><span class="o">=</span><span class="n">target_fields</span><span class="p">)</span>
</pre></div>
</div>
<section id="api-endpoints">
<h3>API Endpoints<a class="headerlink" href="#api-endpoints" title="Link to this heading">¶</a></h3>
<p>Methods do not accept URL parameters or request bodies unless specified. Please note that if your EDP endpoint is sponsor-cloud.edp.aws.quartz.bio, you would use sponsor-cloud.api.edp.aws.quartz.bio.
For correct work of the API, you need to change <code class="docutils literal notranslate"><span class="pre">&lt;EDP_API_HOST&gt;</span></code> to your current domain, such as my-domain.api.edp.aws.quartz.bio</p>
</section>
<section id="datasets">
<h3>Datasets<a class="headerlink" href="#datasets" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>create</p></td>
<td><p>POST <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/datasets</p></td>
<td><p>Create a dataset.</p></td>
<td><p>This request requires an authorized user with permission to create new datasets.</p></td>
<td><p>The response contains a single Dataset resource.</p></td>
</tr>
</tbody>
</table>
<p>Request Body:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>string</p></td>
<td><p>The unique name within the vault for this dataset.</p></td>
</tr>
<tr class="row-odd"><td><p>vault_id</p></td>
<td><p>integer</p></td>
<td><p>The vault version in which to create the dataset.</p></td>
</tr>
<tr class="row-even"><td><p>vault_parent_object_id</p></td>
<td><p>integer</p></td>
<td><p>The folder ID in which to create the dataset. Use ‘null’ to place at ‘/’.</p></td>
</tr>
<tr class="row-odd"><td><p>fields</p></td>
<td><p>Dataset Fields</p></td>
<td><p>A list of dataset field objects.</p></td>
</tr>
<tr class="row-even"><td><p>metadata</p></td>
<td><p>object</p></td>
<td><p>A dictionary of key/value pairs.</p></td>
</tr>
<tr class="row-odd"><td><p>tags</p></td>
<td><p>string</p></td>
<td><p>A list of strings to organize the dataset.</p></td>
</tr>
<tr class="row-even"><td><p>capacity</p></td>
<td><p>string</p></td>
<td><p>(Optional) The dataset capacity level (small, medium, or large).</p></td>
</tr>
<tr class="row-odd"><td><p>storage_class</p></td>
<td><p>string</p></td>
<td><p>(Optional) The dataset storage class.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>delete</p></td>
<td><p>DELETE <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/datasets/{DATASET_ID}</p></td>
<td><p>Delete a dataset.</p></td>
<td><p>This request requires an authorized user with permission to modify the target dataset.</p></td>
<td><p>The response returns “HTTP 200 OK” when successful.</p></td>
</tr>
<tr class="row-odd"><td><p>get</p></td>
<td><p>GET <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/datasets/{DATASET_ID}</p></td>
<td><p>Retrieve metadata about a dataset.</p></td>
<td><p>This request requires an authorized user with permission to view the target dataset.</p></td>
<td><p>The response contains a Dataset resource.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id2">
<h3>Dataset Fields<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>create</p></td>
<td><p>POST <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/dataset_fields</p></td>
<td><p>Create a dataset field.</p></td>
<td><p>This request requires an authorized user with write permission on the dataset.</p></td>
<td><p>The response contains a single DatasetField resource.</p></td>
</tr>
</tbody>
</table>
<p>Request Body:</p>
<p>In the request body, provide an object with the following properties:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data_type</p></td>
<td><p>string</p></td>
<td><p>A valid data type (see below).</p></td>
</tr>
<tr class="row-odd"><td><p>description</p></td>
<td><p>string</p></td>
<td><p>Describes the contents of the field.</p></td>
</tr>
<tr class="row-even"><td><p>entity_type</p></td>
<td><p>string</p></td>
<td><p>A valid entity type.</p></td>
</tr>
<tr class="row-odd"><td><p>expression</p></td>
<td><p>string</p></td>
<td><p>A valid expression.</p></td>
</tr>
<tr class="row-even"><td><p>is_hidden</p></td>
<td><p>boolean</p></td>
<td><p>Set to True if the field should be excluded by default from the UI.</p></td>
</tr>
<tr class="row-odd"><td><p>is_list</p></td>
<td><p>boolean</p></td>
<td><p>Set to True if multiple values are stored as a list.</p></td>
</tr>
<tr class="row-even"><td><p>name</p></td>
<td><p>string</p></td>
<td><p>The “low-level” field name, used in JSON formatted records. Field names are immutable once set. The title and description of a field can always be changed.</p></td>
</tr>
<tr class="row-odd"><td><p>ordering</p></td>
<td><p>integer</p></td>
<td><p>The order in which this column appears when retrieving data from the dataset. Order is 0-based. Default is 0</p></td>
</tr>
<tr class="row-even"><td><p>title</p></td>
<td><p>string</p></td>
<td><p>The field’s display name, shown in the UI and in CSV/Excel exports.</p></td>
</tr>
<tr class="row-odd"><td><p>url_template</p></td>
<td><p>string</p></td>
<td><p>A URL template with one or more “{value}” sections that will be interpolated with the field value and displayed as a link in the dataset table.</p></td>
</tr>
</tbody>
</table>
<p>Data Types:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Data Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>auto (default)</p></td>
<td><p>Attempt to automatically detect the data type upon the first import.</p></td>
</tr>
<tr class="row-odd"><td><p>boolean</p></td>
<td><p>Either True, False, or null.</p></td>
</tr>
<tr class="row-even"><td><p>date</p></td>
<td><p>A string in ISO 8601 format, for example: “2017-03-29T14:52:01”.</p></td>
</tr>
<tr class="row-odd"><td><p>double</p></td>
<td><p>A double-precision 64-bit IEEE 754 floating point.</p></td>
</tr>
<tr class="row-even"><td><p>float</p></td>
<td><p>single-precision 32-bit IEEE 754 floating point.</p></td>
</tr>
<tr class="row-odd"><td><p>integer</p></td>
<td><p>A signed 32-bit integer with a minimum value of -2E+31 and a maximum value of (2E+31)-1.</p></td>
</tr>
<tr class="row-even"><td><p>long</p></td>
<td><p>A signed 64-bit integer with a minimum value of -2E+63 and a maximum value of (2E+63)-1.</p></td>
</tr>
<tr class="row-odd"><td><p>object</p></td>
<td><p>A key/value, JSON-like object, similar to a Python dictionary.</p></td>
</tr>
<tr class="row-even"><td><p>string</p></td>
<td><p>A valid UTF-8 string up to 32,766 characters in length.</p></td>
</tr>
<tr class="row-odd"><td><p>text</p></td>
<td><p>A valid UTF-8 string of any length, indexed for full-text search.</p></td>
</tr>
<tr class="row-even"><td><p>blob</p></td>
<td><p>A valid UTF-8 string of any length, not indexed for search.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>get</p></td>
<td><p>GET <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/dataset_fields/{ID}</p></td>
<td><p>Retrieve a dataset field.</p></td>
<td><p>This request requires an authorized user with read permission on the dataset.</p></td>
<td><p>The response contains a DatasetField resource.</p></td>
</tr>
<tr class="row-odd"><td><p>list</p></td>
<td><p>GET <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/datasets/{DATASET_ID}/fields</p></td>
<td><p>Retrieve a set of dataset fields for a dataset.</p></td>
<td><p>This request requires an authorized user with read permission on the dataset.</p></td>
<td><p>The response contains a list of DatasetField resources.</p></td>
</tr>
</tbody>
</table>
<p>Parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>limit</p></td>
<td><p>integer</p></td>
<td><p>The number of objects to return per page.</p></td>
</tr>
<tr class="row-odd"><td><p>offset</p></td>
<td><p>integer</p></td>
<td><p>The offset within the list of available objects.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>update</p></td>
<td><p>PUT <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/dataset_fields/{ID}</p></td>
<td><p>Update a dataset field.</p></td>
<td><p>This request requires an authorized user with write permission on the dataset.</p></td>
<td><p>The response contains the updated DatasetField resource.</p></td>
</tr>
</tbody>
</table>
<p>Request Body</p>
<p>In the request body, provide a valid DatasetField object (see <em>create</em> above).</p>
</section>
<section id="id3">
<h3>Dataset Migrations<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>create</p></td>
<td><p>POST <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/dataset_migrations</p></td>
<td><p>Create a dataset migration.</p></td>
<td><p>This request requires an authorized user with read permissions from the source dataset, and write permissions to the target dataset.</p></td>
<td><p>The response contains a new DatasetMigration resource.</p></td>
</tr>
</tbody>
</table>
<p>Request Body:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>commit_mode</p></td>
<td><p>string</p></td>
<td><p>A valid commit mode.</p></td>
</tr>
<tr class="row-odd"><td><p>include_errors</p></td>
<td><p>boolean</p></td>
<td><p>If True, a new field (_errors) will be added to each record containing expression evaluation errors (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>source_id</p></td>
<td><p>integer</p></td>
<td><p>The ID of a valid, queryable dataset.</p></td>
</tr>
<tr class="row-odd"><td><p>source_params</p></td>
<td><p>object</p></td>
<td><p>The query parameters used on the source dataset (see below).</p></td>
</tr>
<tr class="row-even"><td><p>target_fields</p></td>
<td><p>object</p></td>
<td><p>A list of valid dataset fields to create or override in the target dataset.</p></td>
</tr>
<tr class="row-odd"><td><p>target_id</p></td>
<td><p>integer</p></td>
<td><p>A valid dataset with write permissions.</p></td>
</tr>
<tr class="row-even"><td><p>entity_params</p></td>
<td><p>object</p></td>
<td><p>(optional) Configuration parameters for entity detection.</p></td>
</tr>
<tr class="row-odd"><td><p>validation_params</p></td>
<td><p>object</p></td>
<td><p>(optional) Configuration parameters for validation</p></td>
</tr>
<tr class="row-even"><td><p>annotator_params</p></td>
<td><p>object</p></td>
<td><p>(optional) Configuration parameters for the Annotator.</p></td>
</tr>
<tr class="row-odd"><td><p>priority</p></td>
<td><p>integer</p></td>
<td><p>A priority to assign to this task.</p></td>
</tr>
</tbody>
</table>
<p>The following query parameters (source_params property) are supported for migrations:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>limit</p></td>
<td><p>integer</p></td>
<td><p>The number of records to migrate from the source dataset.</p></td>
</tr>
<tr class="row-odd"><td><p>filters</p></td>
<td><p>objects</p></td>
<td><p>A valid filter object.</p></td>
</tr>
<tr class="row-even"><td><p>fields</p></td>
<td><p>string</p></td>
<td><p>A list of fields to include from the source dataset.</p></td>
</tr>
<tr class="row-odd"><td><p>exclude_fields</p></td>
<td><p>string</p></td>
<td><p>A list of fields to exclude from the source dataset.</p></td>
</tr>
<tr class="row-even"><td><p>query</p></td>
<td><p>string</p></td>
<td><p>A valid query string.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>delete</p></td>
<td><p>DELETE <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/dataset_migrations/{ID}</p></td>
<td><p>Delete a dataset migration.</p></td>
<td><p>This request requires an authorized user with write permissions.</p></td>
<td><p>The response returns “HTTP 200 OK” when successful.</p></td>
</tr>
<tr class="row-odd"><td><p>get</p></td>
<td><p>GET <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/dataset_migrations/{ID}</p></td>
<td><p>Retrieve metadata about a dataset migration.</p></td>
<td><p>This request requires an authorized user with permission.</p></td>
<td><p>The response contains a DatasetMigration resource.</p></td>
</tr>
<tr class="row-even"><td><p>list</p></td>
<td><p>GET <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/dataset/{DATASET_ID}/migrations</p></td>
<td><p>Retrieve a list of dataset migrations for a dataset.</p></td>
<td><p>This request requires an authorized user with read permission.</p></td>
<td><p>The response contains a list of DatasetMigration resources from the specified source dataset.</p></td>
</tr>
</tbody>
</table>
<p>Parameters:</p>
<p>This request accepts the following parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>limit</p></td>
<td><p>integer</p></td>
<td><p>The number of objects to return per page.</p></td>
</tr>
<tr class="row-odd"><td><p>offset</p></td>
<td><p>integer</p></td>
<td><p>The offset within the list of available objects.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>HTTP Request</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Authorization</p></th>
<th class="head"><p>Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cancel</p></td>
<td><p>PUT <a class="reference external" href="https:/">https:/</a>/&lt;EDP_API_HOST&gt;/v2/datasets_migrations/{ID}/cancel</p></td>
<td><p>Cancel a dataset  migration.</p></td>
<td><p>This request requires an authorized user with read permission on the dataset.</p></td>
<td><p>The response will contain a DatasetMigration resource with the status canceled.</p></td>
</tr>
</tbody>
</table>
<p>Request Body:</p>
<p>In the request body, provide a valid DatasetMigration object (see <em>create</em> above) with status = canceled.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">QuartzBio</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Authentication</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vaults and Files</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="exporting_data.html">Exporting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_data.html">Importing Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="import_parameters.html">Import Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="import_parameters.html#json-jsonl">JSON (JSONL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vaults_and_objects.html">Vaults and Objects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Datasets</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating and Migrating Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-datasets">Creating Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-fields">Dataset Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#migrating-datasets">Migrating Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copying-datasets">Copying Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-fields">Modifying Fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dataset_templates.html">Dataset Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataset_versioning.html">Dataset Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="joining_and_aggregating_datasets.html">Joining and Aggregating Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforming_datasets.html">Transforming Datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Expressions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="expressions.html">Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="expression_functions.html">Expression Functions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Global Search</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_discovery.html">Data Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata_and_global_beacons.html">Metadata and Global Beacons</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Queries and Filters</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="querying_datasets_and_files.html">Querying Datasets and Files</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/quartzbio/">Current Version: v1.5.0</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="vaults_and_objects.html" title="previous chapter">Vaults and Objects</a></li>
      <li>Next: <a href="dataset_templates.html" title="next chapter">Dataset Templates</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2026 QuartzBio.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/creating_and_migrating_datasets.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>